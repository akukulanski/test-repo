language: python

stages:
- docker_img
- testing

#services:
#    - docker

#before_install:
#    - echo "---before install---"

#install:
#    - echo "---install---"

#before_script:
#    - echo "---before script---"

#before_cache:
#    - echo "---before cache---"

#before_deploy:
#    - echo "---before deploy---"

#deploy:
#    - echo "---deploy---"

#after_deploy:
#    - echo "---after deploy---"

#after_script:
#    - echo "---after script---"

jobs:
    include:
    - stage: docker_img
      script:
      - echo "---stage Docker, script---"
      - docker build -t docker_image -f .gci/dockerfile .
      #- docker run -it -d --name test_img docker_image /bin/bash
      #- docker exec test_img "echo Docker Exec!!"
      - docker run -it docker_image echo stage docker\: docker run"
      - docker run -it docker_image echo stage docker: docker run"
      - docker run -it docker_image echo stage docker docker run
      - docker run -it docker_image "echo stage docker docker run"
      - docker run -it docker_image echo "stage docker docker run"
    - stage: testing
      script:
      - echo "Ac√° corre el test"
      - docker run -it docker_image echo "stage test\: docker run"

#after_success:
#    - echo "---after success---"
#    - echo "Test Success - Branch($TRAVIS_BRANCH) Pull Request($TRAVIS_PULL_REQUEST) Tag($TRAVIS_TAG)"
#    - if [[ "$TRAVIS_BRANCH" == "master" ]]; then echo -e "---master!---"; fi
#after_failure:
#    - echo "---after failure---"
# https://travis-ci.community/t/how-to-skip-jobs-based-on-the-files-changed-in-a-subdirectory/2979/11
